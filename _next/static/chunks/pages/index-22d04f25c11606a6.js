(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(5434)}])},5434:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Y}});var n=a(5893);let r=e=>{let{className:t}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"1000",height:"886",viewBox:"0 0 1000 886",className:t,children:(0,n.jsx)("g",{transform:"matrix(1,0,0,1,-0.009896020071778366,0.2815858853240343)",children:(0,n.jsx)("svg",{viewBox:"0 0 369 327",preserveAspectRatio:"xMidYMid meet",height:"886",width:"1000",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsxs)("g",{id:"tight-bounds",transform:"matrix(1,0,0,1,0.003651631406484057,-0.09862111105385907)",children:[(0,n.jsxs)("svg",{viewBox:"0 0 368.99269673718703 327.2",height:"327.2",width:"368.99269673718703",children:[(0,n.jsx)("g",{children:(0,n.jsxs)("svg",{viewBox:"0 0 368.99269673718703 327.2",height:"327.2",width:"368.99269673718703",children:[(0,n.jsx)("g",{children:(0,n.jsx)("svg",{viewBox:"0 0 368.99269673718703 327.2",height:"327.2",width:"368.99269673718703",children:(0,n.jsx)("g",{id:"textblocktransform",children:(0,n.jsx)("svg",{viewBox:"0 0 368.99269673718703 327.2",height:"327.2",width:"368.99269673718703",id:"textblock",children:(0,n.jsx)("g",{children:(0,n.jsx)("svg",{viewBox:"0 0 368.99269673718703 327.2",height:"327.2",width:"368.99269673718703",children:(0,n.jsx)("g",{transform:"matrix(1,0,0,1,0,0)",children:(0,n.jsx)("svg",{width:"368.99269673718703",viewBox:"19.095701217651367 -4.764547824859619 31.37058448791504 27.8175106048584",height:"327.2",children:(0,n.jsx)("path",{d:"M32.308 15.297l1.939 0.057c-0.26 2.72-1.056 4.701-2.386 5.943-1.33 1.235-3.138 1.818-5.424 1.751v0c-2.352-0.069-4.182-1.01-5.489-2.823-1.307-1.819-1.922-4.255-1.846-7.308v0l0.156-5.287c0.09-3.065 0.857-5.444 2.301-7.136 1.437-1.698 3.359-2.512 5.764-2.441v0c2.272 0.067 4.016 0.769 5.231 2.105 1.208 1.343 1.862 3.366 1.962 6.07v0l-1.939-0.057c-0.115-2.211-0.592-3.806-1.43-4.784-0.832-0.972-2.124-1.483-3.877-1.535v0c-1.839-0.054-3.292 0.59-4.358 1.933-1.067 1.343-1.638 3.317-1.716 5.922v0l-0.153 5.218c-0.076 2.586 0.361 4.609 1.312 6.071 0.951 1.469 2.329 2.23 4.134 2.283v0c1.893 0.056 3.276-0.377 4.15-1.299 0.874-0.921 1.43-2.482 1.669-4.683zM48.629 15.515l-8.808-6.995-5.115 2.47 4.405 9.122-1.738 0.839-10.589-21.927 6.015-2.905c1.993-0.963 3.814-1.139 5.464-0.529 1.655 0.607 2.973 1.925 3.953 3.955v0c0.681 1.411 0.938 2.816 0.769 4.215-0.165 1.405-0.726 2.59-1.681 3.555v0l9.067 7.115 0.095 0.198zM29.309-0.185l4.623 9.572 4.574-2.209c1.297-0.626 2.115-1.569 2.454-2.829 0.345-1.262 0.185-2.584-0.482-3.965v0c-0.742-1.537-1.72-2.534-2.933-2.992-1.204-0.455-2.53-0.333-3.977 0.366v0z",opacity:"1",transform:"matrix(1,0,0,1,0,0)",fill:"currentColor",id:"text-0"})})})})})})})})}),(0,n.jsx)("g",{})]})}),(0,n.jsx)("defs",{})]}),(0,n.jsx)("rect",{width:"368.99269673718703",height:"327.2",fill:"none",stroke:"none",visibility:"hidden"})]})})})})};var s=a(4529),i=a(782);let l=(0,s.Ue)()((0,i.tJ)(e=>({theme:"light",setTheme:t=>e({theme:t})}),{name:"theme-store"}));var o=a(6010);let c=()=>{let{theme:e,setTheme:t}=l();return(0,n.jsx)("button",{className:"flex items-center p-2",onClick:()=>{t("light"===e?"dark":"light")},children:(0,n.jsx)("span",{className:(0,o.Z)({"i-bi-sun-fill":"dark"===e,"i-bi-sun":"light"===e})})})};var d=a(5498),h=a(1766),m=a(7680),u=a(7294);let x=e=>{let{className:t,...a}=e;return(0,n.jsx)("button",{className:(0,o.Z)("p-3 bg-base-hover hover:bg-opacity-60","disabled:hover:bg-opacity-100 disabled:opacity-30",t),...a})};var g=a(6693),p=a(5426);let v=e=>{let{color:t,size:a="20px",dot:r}=e;return(0,n.jsx)(p.E.div,{layoutId:"dot-".concat(r.id),className:"w-10 h-10 rounded-full shadow-lg shadow-[black]",initial:{opacity:r.isNew?0:1},animate:{opacity:1},style:{zIndex:r.id,backgroundColor:t,margin:-5,width:a,height:a,background:"radial-gradient(circle, white 0%, ".concat(t," 80%, ").concat(t," 100%)")}})},y=e=>{let{size:t,color:a,dots:r}=e;return(0,n.jsx)("div",{className:"flex flex-wrap justify-center",style:{width:"calc(".concat(t," * 1.5)")},children:r.map(e=>(0,n.jsx)(v,{dot:e,color:a,size:t},e.id))})},f=e=>{let{dotWidth:t,onClick:a,dots:r,color:s,className:i}=e;return(0,n.jsx)("div",{className:(0,o.Z)("bg-base2 text-base2","flex items-center justify-center relative","transition-opacity duration-300",i),onClick:a,children:(0,n.jsx)(y,{color:s,dots:r,size:t})})};var b=a(5050),w=a(8776),j=a(629),N=a(48),I=a(375),E=a(1428);function P(e,t){let a=t%e.cols,n=(t-a)/e.rows;return{row:n,col:a}}let A={isValidGridPosition:(e,t)=>{let{row:a,col:n}=t;return a>=0&&a<e.rows&&n>=0&&n<e.cols},isCorner:(e,t,a)=>{let n=[[0,0],[0,e.cols-1],[e.rows-1,0],[e.rows-1,e.cols-1]];return n.some(e=>{let[n,r]=e;return n===t&&r===a})},isSide:(e,t,a)=>{let n=[0===t,0===a,t===e.rows-1,a===e.cols-1];return n.some(e=>e)}},C=0,k={grid:{rows:5,cols:5},players:[],blastQueue:[],currentPlayerIndex:0,game:{}},T=(0,j.C)({id:"Chain Reaction",context:k,initial:"Initial",tsTypes:{},on:{CLOSE:{target:"Initial",actions:"resetGame"}},states:{SelectingPlayers:{on:{PLAYERS_SELECTED:{target:"Game",actions:(0,b.f0)((e,t)=>{e.players=t.players.map(e=>({...e,startedPlaying:!1}));let{rows:a,cols:n}=t.grid;e.grid={rows:a,cols:n},e.game=(0,m.Z)(a*n).reduce((e,t)=>(e[t]={dots:[],playerIndex:void 0},e),{})})}}},Game:{initial:"WaitingForInput",states:{WaitingForInput:{on:{INPUT_ENTERED:{target:"InputEntered",cond:"isValidInput"}}},InputEntered:{entry:["onInputEnter","setPlayerStatusPlaying","setupAnimationQueue"],after:{0:"Animating"}},Animating:{on:{ANIMATION_DONE:[{target:"WaitingForInput",actions:["setNextPlayer","checkIfGameOver"]}]},entry:["onAnimationBlast","blastAnimationTicker","exitAnimationIfQueueEmpty"],after:{ANIMATION_TIMEOUT:{target:"Animating",actions:["onAnimationBlast","blastAnimationTicker","exitAnimationIfQueueEmpty","checkIfGameOver"]}}},GameOver:{}},on:{PLAYER_WON:{target:".GameOver",actions:["onGameOver",(0,b.f0)((e,t)=>{e.gameOver={playerIndex:t.playerIndex}})]},RESTART:{target:"SelectingPlayers",actions:(0,b.f0)(()=>k)}}},Initial:{on:{START_GAME:"SelectingPlayers"}}},schema:{context:{},events:{}},predictableActionArguments:!0,preserveActionOrder:!0},{guards:{isValidInput:(e,t)=>{let a=e.currentPlayerIndex,n=e.game[t.posId];if(!n)return!0;let r=n.playerIndex;return!Number.isInteger(r)||r===a}},delays:{ANIMATION_TIMEOUT:400},actions:{resetGame:(0,b.f0)(()=>k),setPlayerStatusPlaying:(0,b.f0)(e=>{e.players[e.currentPlayerIndex].startedPlaying=!0}),setupAnimationQueue:(0,b.f0)((e,t)=>{var a;let n=e.game[t.posId],r=++C,s={...n,playerIndex:e.currentPlayerIndex,dots:[...null!==(a=null==n?void 0:n.dots)&&void 0!==a?a:[],{id:r,isNew:!0}]};e.game[t.posId]=s,e.blastQueue=[{posId:t.posId}]}),blastAnimationTicker:(0,b.f0)(e=>{let t=[];for(let a of e.blastQueue){let{posId:n}=a,r=e.game[n];r&&r.dots.length>=function(e,t){let a=function(e,t){let{row:a,col:n}=P(e,t);return A.isCorner(e,a,n)?"corner":A.isSide(e,a,n)?"side":"other"}(e,t);switch(a){case"corner":return 2;case"side":return 3;case"other":return 4}}(e.grid,n)&&(r.playerIndex=void 0,(function(e,t){let{row:a,col:n}=P(e,t);return[{neighbourhood:"up",row:a-1,col:n},{neighbourhood:"right",row:a,col:n+1},{neighbourhood:"bottom",row:a+1,col:n},{neighbourhood:"left",row:a,col:n-1}].filter(t=>A.isValidGridPosition(e,t)).map(t=>{let{neighbourhood:a,...n}=t;return{neighbourhood:a,posId:function(e,t){let{row:a,col:n}=t;return a*e.rows+n}(e,n)}})})(e.grid,n).forEach(a=>{var n,s;let{posId:i}=a,l=r.dots.shift();(0,w.Z)(void 0!==l,"Dot should exist");let o=null!==(s=null===(n=e.game[i])||void 0===n?void 0:n.dots)&&void 0!==s?s:[];e.game[i]={dots:[...o,{...l,isNew:!1}],playerIndex:e.currentPlayerIndex},t.push({posId:i})}))}e.blastQueue=t}),exitAnimationIfQueueEmpty:(0,E.RN)([{cond:e=>0===e.blastQueue.length,actions:(0,N.raise)({type:"ANIMATION_DONE"})}]),setNextPlayer:(0,b.f0)(e=>{let t=t=>!!e.players[t].startedPlaying&&!new Set(Object.values(e.game).map(e=>null==e?void 0:e.playerIndex)).has(t);for(let a=1;a<e.players.length;a++){let n=(e.currentPlayerIndex+a)%e.players.length;if(!t(n)){e.currentPlayerIndex=n;return}}}),checkIfGameOver:I.pure(e=>{let t=e.players.every(e=>e.startedPlaying);if(!t)return;let a=new Set(Object.values(e.game).map(e=>null==e?void 0:e.playerIndex).filter(e=>void 0!==e));if(1===a.size)return(0,N.raise)({type:"PLAYER_WON",playerIndex:a.values().next().value})})}});var O=a(725),_=a.n(O),S=a(3935);let G=e=>{let{onClose:t,children:a,className:r,closeButton:s,closeOnOutsideClick:i}=e;return(0,S.createPortal)((0,n.jsx)("div",{className:(0,o.Z)("fixed inset-0 bg-base2 bg-opacity-50","z-modal","flex items-center justify-center","backdrop-blur-md"),onClick:i?t:void 0,children:(0,n.jsxs)("div",{onClick:e=>{e.stopPropagation()},className:(0,o.Z)("relative","p-5 bg-base w-[calc(100vw_-_20px)]",r),children:[a,s&&(0,n.jsx)(R,{onClose:t})]})}),document.body)},R=e=>{let{onClose:t}=e;return(0,n.jsx)(x,{className:"absolute top-0 right-0",onClick:t,children:(0,n.jsx)("span",{className:"i-carbon-close text-lg"})})},M=e=>{let{children:t}=e;return(0,S.createPortal)(t,document.body)},D=e=>{let{player:t,onClose:a}=e,{width:r,height:s}=function(){let[e,t]=(0,u.useState)({width:0,height:0});return(0,u.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(G,{onClose:a,className:"bg-opacity-0 max-w-screen-mobile",children:[(0,n.jsxs)("h1",{className:"text-center flex flex-col gap-3",children:[(0,n.jsx)("span",{className:"font-bold p-2 text-[1.5em] backdrop-blur-xl bg-base bg-opacity-50 rounded-md",children:t.name}),(0,n.jsx)("span",{children:"won!"})]}),(0,n.jsxs)(x,{className:"mx-auto flex justify-center gap-2 items-center mt-5",onClick:a,children:[(0,n.jsx)("span",{className:"carbon-restart"}),"Restart"]})]}),(0,n.jsx)(M,{children:(0,n.jsx)(_(),{recycle:!1,width:r,height:s,style:{zIndex:1e3}})})]})},Z=["#800180","#c65915","#d61323","#05676b","#2d2d2d"],z=e=>{let{onDone:t,onClose:a}=e,[r,s]=(0,u.useState)(5),[i,l]=(0,u.useState)(["Player1","Player2"]),c=e=>{e.preventDefault(),t(i.map((e,t)=>({name:e,color:Z[t]})),{rows:r,cols:r})};return(0,n.jsx)(G,{className:"max-w-screen-mobile",closeButton:!0,onClose:a,children:(0,n.jsx)("form",{onSubmit:c,className:(0,o.Z)("relative"),children:(0,n.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,n.jsx)("h2",{children:"Select Players"}),(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("input",{className:"p-2 bg-base1 flex-grow",type:"number",value:r,min:5,max:20,onChange:e=>s(Number(e.target.value)),placeholder:"Rows"}),(0,n.jsx)("span",{className:"i-carbon-close text-lg scale-150 shrink-0"}),(0,n.jsx)("input",{className:"p-2 bg-base1 flex-grow",type:"number",min:5,max:20,onChange:e=>s(Number(e.target.value)),value:r,placeholder:"Cols"})]}),i.map((e,t)=>(0,n.jsxs)("label",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"w-8 h-8 shrink-0",style:{backgroundColor:Z[t]}}),(0,n.jsx)("input",{type:"text",autoFocus:!0,value:e,onChange:e=>l(a=>{let n=[...a];return n[t]=e.target.value,n}),className:(0,o.Z)("flex-grow shrink w-0","p-2 bg-base1 border border-transparent focus:border-base-invert outline-none")}),i.length>2&&(0,n.jsx)(x,{type:"button",onClick:()=>l(e=>e.filter((e,a)=>a!==t)),children:(0,n.jsx)("span",{className:"i-carbon-trash-can"})})]},t)),i.length<5&&(0,n.jsx)(x,{type:"button",onClick:()=>l([...i,""]),children:"+ Add"}),(0,n.jsx)(x,{type:"submit",children:"Done"})]})})})};var B=a(5800);let L=new h.Howl({src:[(0,B.D)("/music/pop.m4a")]}),Q=new h.Howl({src:[(0,B.D)("/music/success.mp3")]}),W=()=>{var e,t,a,r,s;let[i,l]=(0,d.e)(T,{context:{grid:{rows:5,cols:5},blastQueue:[],currentPlayerIndex:0,players:[{name:"Player1",color:"#2d2d2d",startedPlaying:!1},{name:"Player2",color:"violet",startedPlaying:!1}]},actions:{onInputEnter(){navigator.vibrate&&navigator.vibrate(100)},onAnimationBlast(e){e.blastQueue.length&&L.play()},onGameOver(){Q.play(),navigator.vibrate&&navigator.vibrate(500)}},devTools:!0}),c="min(calc(min(100vw, 100vh) - ".concat(2*g.MARGIN,"px), ").concat(g.MAX_WIDTH,"px)"),h="min(calc(".concat(c," / ").concat(i.context.grid.cols," / 2 - 10px), 30px)");return(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[i.matches("Initial")&&(0,n.jsx)(F,{onStart:()=>l({type:"START_GAME"})}),i.matches("Game")&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex gap-x-5 gap-y-2 flex-wrap mt-5",children:i.context.players.map((e,t)=>(0,n.jsxs)("div",{className:(0,o.Z)("flex items-center gap-2","transition-opacity duration-300",{"opacity-30":i.context.currentPlayerIndex!==t}),children:[(0,n.jsx)("span",{className:"w-5 h-5",style:{backgroundColor:e.color}}),e.name]},e.color))}),(0,n.jsx)("div",{className:(0,o.Z)("grid gap-1 mx-auto text-[100%] z-base"),style:{width:c,height:c,gridTemplate:"repeat(".concat(i.context.grid.rows,", minmax(0, 1fr))/repeat(").concat(i.context.grid.cols,", minmax(0, 1fr))")},children:(0,m.Z)(i.context.grid.rows*i.context.grid.cols).map(e=>{var r,s,c;return(0,n.jsx)(f,{dotWidth:h,className:(0,o.Z)({"cursor-pointer":i.can({type:"INPUT_ENTERED",posId:e})}),dots:null!==(t=null===(r=i.context.game[e])||void 0===r?void 0:r.dots)&&void 0!==t?t:[],color:null===(s=i.context.players[null!==(a=null===(c=i.context.game[e])||void 0===c?void 0:c.playerIndex)&&void 0!==a?a:0])||void 0===s?void 0:s.color,onClick:()=>{l({type:"INPUT_ENTERED",posId:e})}},e)})})]}),i.matches("SelectingPlayers")&&(0,n.jsx)(z,{onDone:(e,t)=>l({type:"PLAYERS_SELECTED",players:e,grid:t}),onClose:()=>l({type:"CLOSE"})}),i.matches("Game.GameOver")&&(0,n.jsx)(D,{player:null!==(s=i.context.players[null!==(r=null===(e=i.context.gameOver)||void 0===e?void 0:e.playerIndex)&&void 0!==r?r:0])&&void 0!==s?s:{},onClose:()=>l({type:"CLOSE"})})]})};function F(e){let{onStart:t}=e;return(0,n.jsxs)("div",{className:"mx-auto prose-theme",children:[(0,n.jsx)("h2",{className:"mt-0",children:"Game Rules"}),(0,n.jsx)("p",{children:"Here are the rules of playing the chain reaction game: (Generated by ChatGPT)"}),(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"Each player takes turns placing an atom in one of their circles."}),(0,n.jsx)("li",{children:"When an atom is placed, it will activate and shoot out a certain number of electrons to neighboring circles."}),(0,n.jsxs)("li",{children:["If a neighboring circle has enough electrons to activate its own atom, it will do so and shoot out more electrons."," "]}),(0,n.jsx)("li",{children:"The game continues until all atoms have been activated. "}),(0,n.jsx)("li",{children:"The player with the most atoms remaining at the end of the game wins."})]}),(0,n.jsxs)(x,{className:"flex items-center gap-x-2",onClick:t,children:[(0,n.jsx)("span",{className:"i-carbon-chart-relationship text-h2"}),"Start Game!"]})]})}var U=a(9008),H=a.n(U);function Y(){let{theme:e}=l();return(0,u.useEffect)(()=>{document.body.setAttribute("data-theme",e)},[e]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(H(),{children:[(0,n.jsx)("title",{children:"Chain Reaction"}),(0,n.jsx)("meta",{name:"description",content:"Chain Reaction Game."})]}),(0,n.jsx)("main",{className:"my-10",style:{marginLeft:g.MARGIN,marginRight:g.MARGIN},children:(0,n.jsxs)("div",{className:"max-w-screen-max mx-auto",children:[(0,n.jsxs)("h1",{className:"font-bold flex items-center gap-2",children:[(0,n.jsx)(r,{className:"w-10 h-10 shrink-0"}),(0,n.jsx)("span",{className:"whitespace-nowrap flex-grow",children:"Chain Reaction"}),(0,n.jsx)(c,{})]}),(0,n.jsx)("hr",{className:"my-10"}),(0,n.jsx)(W,{})]})})]})}}},function(e){e.O(0,[985,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);