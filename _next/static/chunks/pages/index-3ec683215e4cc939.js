(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2386)}])},2386:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var a=n(5893);let r=e=>{let{className:t}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"1000",height:"886",viewBox:"0 0 1000 886",className:t,children:(0,a.jsx)("g",{transform:"matrix(1,0,0,1,-0.009896020071778366,0.2815858853240343)",children:(0,a.jsx)("svg",{viewBox:"0 0 369 327",preserveAspectRatio:"xMidYMid meet",height:"886",width:"1000",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsxs)("g",{id:"tight-bounds",transform:"matrix(1,0,0,1,0.003651631406484057,-0.09862111105385907)",children:[(0,a.jsxs)("svg",{viewBox:"0 0 368.99269673718703 327.2",height:"327.2",width:"368.99269673718703",children:[(0,a.jsx)("g",{children:(0,a.jsxs)("svg",{viewBox:"0 0 368.99269673718703 327.2",height:"327.2",width:"368.99269673718703",children:[(0,a.jsx)("g",{children:(0,a.jsx)("svg",{viewBox:"0 0 368.99269673718703 327.2",height:"327.2",width:"368.99269673718703",children:(0,a.jsx)("g",{id:"textblocktransform",children:(0,a.jsx)("svg",{viewBox:"0 0 368.99269673718703 327.2",height:"327.2",width:"368.99269673718703",id:"textblock",children:(0,a.jsx)("g",{children:(0,a.jsx)("svg",{viewBox:"0 0 368.99269673718703 327.2",height:"327.2",width:"368.99269673718703",children:(0,a.jsx)("g",{transform:"matrix(1,0,0,1,0,0)",children:(0,a.jsx)("svg",{width:"368.99269673718703",viewBox:"19.095701217651367 -4.764547824859619 31.37058448791504 27.8175106048584",height:"327.2",children:(0,a.jsx)("path",{d:"M32.308 15.297l1.939 0.057c-0.26 2.72-1.056 4.701-2.386 5.943-1.33 1.235-3.138 1.818-5.424 1.751v0c-2.352-0.069-4.182-1.01-5.489-2.823-1.307-1.819-1.922-4.255-1.846-7.308v0l0.156-5.287c0.09-3.065 0.857-5.444 2.301-7.136 1.437-1.698 3.359-2.512 5.764-2.441v0c2.272 0.067 4.016 0.769 5.231 2.105 1.208 1.343 1.862 3.366 1.962 6.07v0l-1.939-0.057c-0.115-2.211-0.592-3.806-1.43-4.784-0.832-0.972-2.124-1.483-3.877-1.535v0c-1.839-0.054-3.292 0.59-4.358 1.933-1.067 1.343-1.638 3.317-1.716 5.922v0l-0.153 5.218c-0.076 2.586 0.361 4.609 1.312 6.071 0.951 1.469 2.329 2.23 4.134 2.283v0c1.893 0.056 3.276-0.377 4.15-1.299 0.874-0.921 1.43-2.482 1.669-4.683zM48.629 15.515l-8.808-6.995-5.115 2.47 4.405 9.122-1.738 0.839-10.589-21.927 6.015-2.905c1.993-0.963 3.814-1.139 5.464-0.529 1.655 0.607 2.973 1.925 3.953 3.955v0c0.681 1.411 0.938 2.816 0.769 4.215-0.165 1.405-0.726 2.59-1.681 3.555v0l9.067 7.115 0.095 0.198zM29.309-0.185l4.623 9.572 4.574-2.209c1.297-0.626 2.115-1.569 2.454-2.829 0.345-1.262 0.185-2.584-0.482-3.965v0c-0.742-1.537-1.72-2.534-2.933-2.992-1.204-0.455-2.53-0.333-3.977 0.366v0z",opacity:"1",transform:"matrix(1,0,0,1,0,0)",fill:"currentColor",id:"text-0"})})})})})})})})}),(0,a.jsx)("g",{})]})}),(0,a.jsx)("defs",{})]}),(0,a.jsx)("rect",{width:"368.99269673718703",height:"327.2",fill:"none",stroke:"none",visibility:"hidden"})]})})})})};var s=n(5498),i=n(6010),l=n(1766),o=n(7680),c=n(7294);let d=e=>{let{className:t,...n}=e;return(0,a.jsx)("button",{className:(0,i.Z)("p-3 bg-base-hover hover:bg-opacity-60","disabled:hover:bg-opacity-100 disabled:opacity-30",t),...n})};var h=n(685);let m=e=>{let{color:t,size:n="20px",dot:r}=e;return(0,a.jsx)(h.E.div,{layoutId:"dot-".concat(r.id),className:"w-10 h-10 rounded-full shadow-lg shadow-[black]",initial:{opacity:r.isNew?0:1},animate:{opacity:1},style:{zIndex:r.id,backgroundColor:t,margin:-5,width:n,height:n,background:"radial-gradient(circle, white 0%, ".concat(t," 80%, ").concat(t," 100%)")}})},x=e=>{let{size:t,color:n,dots:r}=e;return(0,a.jsx)("div",{className:"flex flex-wrap justify-center",style:{width:"calc(".concat(t," * 1.5)")},children:r.map(e=>(0,a.jsx)(m,{dot:e,color:n,size:t},e.id))})},u=e=>{let{dotWidth:t,onClick:n,dots:r,color:s,className:l}=e;return(0,a.jsx)("div",{className:(0,i.Z)("bg-base2 text-base2","flex items-center justify-center relative","transition-opacity duration-300",l),onClick:n,children:(0,a.jsx)(x,{color:s,dots:r,size:t})})};var g=n(5050),p=n(8776),v=n(629),y=n(48),f=n(375),w=n(1428);function b(e,t){let n=t%e.cols,a=(t-n)/e.rows;return{row:a,col:n}}let j={isValidGridPosition:(e,t)=>{let{row:n,col:a}=t;return n>=0&&n<e.rows&&a>=0&&a<e.cols},isCorner:(e,t,n)=>{let a=[[0,0],[0,e.cols-1],[e.rows-1,0],[e.rows-1,e.cols-1]];return a.some(e=>{let[a,r]=e;return a===t&&r===n})},isSide:(e,t,n)=>{let a=[0===t,0===n,t===e.rows-1,n===e.cols-1];return a.some(e=>e)}},N=0,I={grid:{rows:5,cols:5},players:[],blastQueue:[],currentPlayerIndex:0,game:{}},E=(0,v.C)({id:"Chain Reaction",context:I,initial:"Initial",tsTypes:{},on:{CLOSE:{target:"Initial",actions:"resetGame"}},states:{SelectingPlayers:{on:{PLAYERS_SELECTED:{target:"Game",actions:(0,g.f0)((e,t)=>{e.players=t.players.map(e=>({...e,startedPlaying:!1}));let{rows:n,cols:a}=t.grid;e.grid={rows:n,cols:a},e.game=(0,o.Z)(n*a).reduce((e,t)=>(e[t]={dots:[],playerIndex:void 0},e),{})})}}},Game:{initial:"WaitingForInput",states:{WaitingForInput:{on:{INPUT_ENTERED:{target:"InputEntered",cond:"isValidInput"}}},InputEntered:{entry:["onInputEnter","setPlayerStatusPlaying","setupAnimationQueue"],after:{0:"Animating"}},Animating:{on:{ANIMATION_DONE:[{target:"WaitingForInput",actions:["setNextPlayer","checkIfGameOver"]}]},entry:["onAnimationBlast","blastAnimationTicker","exitAnimationIfQueueEmpty"],after:{ANIMATION_TIMEOUT:{target:"Animating",actions:["onAnimationBlast","blastAnimationTicker","exitAnimationIfQueueEmpty","checkIfGameOver"]}}},GameOver:{}},on:{PLAYER_WON:{target:".GameOver",actions:["onGameOver",(0,g.f0)((e,t)=>{e.gameOver={playerIndex:t.playerIndex}})]},RESTART:{target:"SelectingPlayers",actions:(0,g.f0)(()=>I)}}},Initial:{on:{START_GAME:"SelectingPlayers"}}},schema:{context:{},events:{}},predictableActionArguments:!0,preserveActionOrder:!0},{guards:{isValidInput:(e,t)=>{let n=e.currentPlayerIndex,a=e.game[t.posId];if(!a)return!0;let r=a.playerIndex;return!Number.isInteger(r)||r===n}},delays:{ANIMATION_TIMEOUT:400},actions:{resetGame:(0,g.f0)(()=>I),setPlayerStatusPlaying:(0,g.f0)(e=>{e.players[e.currentPlayerIndex].startedPlaying=!0}),setupAnimationQueue:(0,g.f0)((e,t)=>{var n;let a=e.game[t.posId],r=++N,s={...a,playerIndex:e.currentPlayerIndex,dots:[...null!==(n=null==a?void 0:a.dots)&&void 0!==n?n:[],{id:r,isNew:!0}]};e.game[t.posId]=s,e.blastQueue=[{posId:t.posId}]}),blastAnimationTicker:(0,g.f0)(e=>{let t=[];for(let n of e.blastQueue){let{posId:a}=n,r=e.game[a];r&&r.dots.length>=function(e,t){let n=function(e,t){let{row:n,col:a}=b(e,t);return j.isCorner(e,n,a)?"corner":j.isSide(e,n,a)?"side":"other"}(e,t);switch(n){case"corner":return 2;case"side":return 3;case"other":return 4}}(e.grid,a)&&(r.playerIndex=void 0,(function(e,t){let{row:n,col:a}=b(e,t);return[{neighbourhood:"up",row:n-1,col:a},{neighbourhood:"right",row:n,col:a+1},{neighbourhood:"bottom",row:n+1,col:a},{neighbourhood:"left",row:n,col:a-1}].filter(t=>j.isValidGridPosition(e,t)).map(t=>{let{neighbourhood:n,...a}=t;return{neighbourhood:n,posId:function(e,t){let{row:n,col:a}=t;return n*e.rows+a}(e,a)}})})(e.grid,a).forEach(n=>{var a,s;let{posId:i}=n,l=r.dots.shift();(0,p.Z)(void 0!==l,"Dot should exist");let o=null!==(s=null===(a=e.game[i])||void 0===a?void 0:a.dots)&&void 0!==s?s:[];e.game[i]={dots:[...o,{...l,isNew:!1}],playerIndex:e.currentPlayerIndex},t.push({posId:i})}))}e.blastQueue=t}),exitAnimationIfQueueEmpty:(0,w.RN)([{cond:e=>0===e.blastQueue.length,actions:(0,y.raise)({type:"ANIMATION_DONE"})}]),setNextPlayer:(0,g.f0)(e=>{let t=t=>!!e.players[t].startedPlaying&&!new Set(Object.values(e.game).map(e=>null==e?void 0:e.playerIndex)).has(t);for(let n=1;n<e.players.length;n++){let a=(e.currentPlayerIndex+n)%e.players.length;if(!t(a)){e.currentPlayerIndex=a;return}}}),checkIfGameOver:f.pure(e=>{let t=e.players.every(e=>e.startedPlaying);if(!t)return;let n=new Set(Object.values(e.game).map(e=>null==e?void 0:e.playerIndex).filter(e=>void 0!==e));if(1===n.size)return(0,y.raise)({type:"PLAYER_WON",playerIndex:n.values().next().value})})}});var P=n(725),C=n.n(P),A=n(3935);let k=e=>{let{onClose:t,children:n,className:r,closeButton:s,closeOnOutsideClick:l}=e;return(0,A.createPortal)((0,a.jsx)("div",{className:(0,i.Z)("fixed inset-0 bg-base2 bg-opacity-50","z-modal","flex items-center justify-center","backdrop-blur-md"),onClick:l?t:void 0,children:(0,a.jsxs)("div",{onClick:e=>{e.stopPropagation()},className:(0,i.Z)("relative","p-5 bg-base w-[calc(100vw_-_20px)]",r),children:[n,s&&(0,a.jsx)(T,{onClose:t})]})}),document.body)},T=e=>{let{onClose:t}=e;return(0,a.jsx)(d,{className:"absolute top-0 right-0",onClick:t,children:(0,a.jsx)("span",{className:"i-carbon-close text-lg"})})},O=e=>{let{children:t}=e;return(0,A.createPortal)(t,document.body)},S=e=>{let{player:t,onClose:n}=e,{width:r,height:s}=function(){let[e,t]=(0,c.useState)({width:0,height:0});return(0,c.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(k,{onClose:n,className:"bg-opacity-0 max-w-screen-mobile",children:[(0,a.jsxs)("h1",{className:"text-center flex flex-col gap-3",children:[(0,a.jsx)("span",{className:"font-bold p-2 text-[1.5em] backdrop-blur-xl bg-base bg-opacity-50 rounded-md",children:t.name}),(0,a.jsx)("span",{children:"won!"})]}),(0,a.jsxs)(d,{className:"mx-auto flex justify-center gap-2 items-center mt-5",onClick:n,children:[(0,a.jsx)("span",{className:"carbon-restart"}),"Restart"]})]}),(0,a.jsx)(O,{children:(0,a.jsx)(C(),{recycle:!1,width:r,height:s,style:{zIndex:1e3}})})]})},_=["#800180","#c65915","#d61323","#05676b","#2d2d2d"],G=e=>{let{onDone:t,onClose:n}=e,[r,s]=(0,c.useState)(5),[l,o]=(0,c.useState)(["Player1","Player2"]),h=e=>{e.preventDefault(),t(l.map((e,t)=>({name:e,color:_[t]})),{rows:r,cols:r})};return(0,a.jsx)(k,{className:"max-w-screen-mobile",closeButton:!0,onClose:n,children:(0,a.jsx)("form",{onSubmit:h,className:(0,i.Z)("relative"),children:(0,a.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,a.jsx)("h2",{children:"Select Players"}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("input",{className:"p-2 bg-base1 flex-grow",type:"number",value:r,min:5,max:20,onChange:e=>s(Number(e.target.value)),placeholder:"Rows"}),(0,a.jsx)("span",{className:"i-carbon-close text-lg scale-150 shrink-0"}),(0,a.jsx)("input",{className:"p-2 bg-base1 flex-grow",type:"number",min:5,max:20,onChange:e=>s(Number(e.target.value)),value:r,placeholder:"Cols"})]}),l.map((e,t)=>(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-8 h-8 shrink-0",style:{backgroundColor:_[t]}}),(0,a.jsx)("input",{type:"text",autoFocus:!0,value:e,onChange:e=>o(n=>{let a=[...n];return a[t]=e.target.value,a}),className:(0,i.Z)("flex-grow shrink w-0","p-2 bg-base1 border border-transparent focus:border-base-invert outline-none")}),l.length>2&&(0,a.jsx)(d,{type:"button",onClick:()=>o(e=>e.filter((e,n)=>n!==t)),children:(0,a.jsx)("span",{className:"i-carbon-trash-can"})})]},t)),l.length<5&&(0,a.jsx)(d,{type:"button",onClick:()=>o([...l,""]),children:"+ Add"}),(0,a.jsx)(d,{type:"submit",children:"Done"})]})})})},R=new l.Howl({src:["/music/pop.m4a"]}),B=new l.Howl({src:["/music/success.mp3"]}),M=()=>{var e,t,n,r,l;let[c,d]=(0,s.e)(E,{context:{grid:{rows:5,cols:5},blastQueue:[],currentPlayerIndex:0,players:[{name:"Player1",color:"#2d2d2d",startedPlaying:!1},{name:"Player2",color:"violet",startedPlaying:!1}]},actions:{onInputEnter(){navigator.vibrate&&navigator.vibrate(100)},onAnimationBlast(e){e.blastQueue.length&&R.play()},onGameOver(){B.play(),navigator.vibrate&&navigator.vibrate(500)}},devTools:!0}),h="min(calc(min(100vw, 100vh) - ".concat(80,"px), ").concat(750,"px)"),m="min(calc(".concat(h," / ").concat(c.context.grid.cols," / 2 - 10px), 30px)");return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[c.matches("Initial")&&(0,a.jsx)(z,{onStart:()=>d({type:"START_GAME"})}),c.matches("Game")&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex gap-x-5 gap-y-2 flex-wrap mt-5",children:c.context.players.map((e,t)=>(0,a.jsxs)("div",{className:(0,i.Z)("flex items-center gap-2","transition-opacity duration-300",{"opacity-30":c.context.currentPlayerIndex!==t}),children:[(0,a.jsx)("span",{className:"w-5 h-5",style:{backgroundColor:e.color}}),e.name]},e.color))}),(0,a.jsx)("div",{className:(0,i.Z)("grid gap-1 mx-auto text-[100%] z-base"),style:{width:h,height:h,gridTemplate:"repeat(".concat(c.context.grid.rows,", minmax(0, 1fr))/repeat(").concat(c.context.grid.cols,", minmax(0, 1fr))")},children:(0,o.Z)(c.context.grid.rows*c.context.grid.cols).map(e=>{var r,s,l;return(0,a.jsx)(u,{dotWidth:m,className:(0,i.Z)({"cursor-pointer":c.can({type:"INPUT_ENTERED",posId:e})}),dots:null!==(t=null===(r=c.context.game[e])||void 0===r?void 0:r.dots)&&void 0!==t?t:[],color:null===(s=c.context.players[null!==(n=null===(l=c.context.game[e])||void 0===l?void 0:l.playerIndex)&&void 0!==n?n:0])||void 0===s?void 0:s.color,onClick:()=>{d({type:"INPUT_ENTERED",posId:e})}},e)})})]}),c.matches("SelectingPlayers")&&(0,a.jsx)(G,{onDone:(e,t)=>d({type:"PLAYERS_SELECTED",players:e,grid:t}),onClose:()=>d({type:"CLOSE"})}),c.matches("Game.GameOver")&&(0,a.jsx)(S,{player:null!==(l=c.context.players[null!==(r=null===(e=c.context.gameOver)||void 0===e?void 0:e.playerIndex)&&void 0!==r?r:0])&&void 0!==l?l:{},onClose:()=>d({type:"CLOSE"})})]})};function z(e){let{onStart:t}=e;return(0,a.jsxs)("div",{className:"mx-auto prose-theme",children:[(0,a.jsx)("h2",{className:"mt-0",children:"Game Rules"}),(0,a.jsx)("p",{children:"Here are the rules of playing the chain reaction game: (Generated by ChatGPT)"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"Each player takes turns placing an atom in one of their circles."}),(0,a.jsx)("li",{children:"When an atom is placed, it will activate and shoot out a certain number of electrons to neighboring circles."}),(0,a.jsxs)("li",{children:["If a neighboring circle has enough electrons to activate its own atom, it will do so and shoot out more electrons."," "]}),(0,a.jsxs)("li",{children:["The game continues until all atoms have been activated."," "]}),(0,a.jsx)("li",{children:"The player with the most atoms remaining at the end of the game wins."})]}),(0,a.jsxs)(d,{className:"flex items-center gap-x-2",onClick:t,children:[(0,a.jsx)("span",{className:"i-carbon-chart-relationship text-h2"}),"Start Game!"]})]})}var L=n(9008),Q=n.n(L);function Z(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(Q(),{children:[(0,a.jsx)("title",{children:"Chain Reaction"}),(0,a.jsx)("meta",{name:"description",content:"Chain Reaction Game."}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,a.jsx)("link",{rel:"preload",href:"/fonts/style.css",as:"style"})]}),(0,a.jsx)("main",{className:"my-10",style:{marginLeft:40,marginBottom:40},children:(0,a.jsxs)("div",{className:"max-w-screen-max mx-auto",children:[(0,a.jsxs)("h1",{className:"font-bold flex items-center gap-2",children:[(0,a.jsx)(r,{className:"w-10 h-10"}),(0,a.jsx)("span",{children:"Chain Reaction"})]}),(0,a.jsx)("hr",{className:"my-10"}),(0,a.jsx)(M,{})]})})]})}}},function(e){e.O(0,[648,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);